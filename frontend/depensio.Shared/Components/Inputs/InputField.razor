@using System.Linq.Expressions

<div>
    <label for="@Id" class="block text-sm font-medium text-gray-700 mb-1 space-x-2">
        @Label @if (IsRequired) {
        <span class="text-red-500">*</span>
                }
    </label>
    <div class="relative">
        @if (!string.IsNullOrEmpty(Icon))
        {
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="@Icon text-gray-400"></i>
            </div>
        }

        <InputText @bind-Value="Value"
                   id="@Id"
                   type="@Type"
                   placeholder="@Placeholder"
                   class="@CssClass"
                   name="@Id" />
    </div>
    <div class="text-red-500 text-sm mt-1">
        <ValidationMessage For="For" />
    </div>
</div>

@code {
    [Parameter] public string Label { get; set; } = string.Empty;
    [Parameter] public string Placeholder { get; set; } = string.Empty;
    [Parameter] public string Type { get; set; } = "text";
    [Parameter] public string Icon { get; set; } = string.Empty;
    [Parameter] public string Id { get; set; } = Guid.NewGuid().ToString();
    [Parameter] public bool IsRequired { get; set; } = false;

    [Parameter]
    public string CssClass { get; set; } =
        "pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-700 focus:border-transparent transition duration-200";

    [Parameter] public Expression<Func<string>> For { get; set; }
    [Parameter] public string Value { get; set; }
    [Parameter] public EventCallback<string> ValueChanged { get; set; }
    [Parameter] public Expression<Func<string>> ValueExpression { get; set; }
}
